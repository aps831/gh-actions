---
name: Action Update Change Log
description: Update change log
inputs:
  current-tag:
    description: Current tag
    required: true
  start-tag:
    description: Start tag
    required: true
outputs:
  changelog:
    description: Change log file name
    value: CHANGELOG.md
runs:
  using: "composite"
  steps:
    - uses: aps831/gh-actions/install-prettier@master

    - uses: orhun/git-cliff-action@58e319c5e292bb2f66e0df408448a0c8dc1748c7 # pin@v2
      id: git-cliff
      with:
        args: ${{ inputs.start-tag }}..${{ inputs.current-tag }}
      env:
        OUTPUT: CHANGELOG.md

    - shell: bash
      run: prettier -w CHANGELOG.md

    - shell: bash
      run: |
        sed -i '1s/^/<!-- markdownlint-disable MD024 -->\n\n/' CHANGELOG.md
